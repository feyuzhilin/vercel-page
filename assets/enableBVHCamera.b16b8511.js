import{bf as c,bg as f,C as g,E as u,bh as b,r as v}from"./index.ac2cf653.js";function l(t){var i;const e=this.targetState.get();e&&e._visible===void 0&&(e.outerObject3d.visible=t);for(const o of this.camera.children)((i=o.userData.manager)==null?void 0:i._visible)===void 0&&(o.visible=t)}function p(){if(this.done)return;const t=this.camera;c.add(t),this.then(()=>c.delete(t)),this.createEffect(()=>{if(!this.targetState.get())return;let e=!0;l.call(this,!e);let o=!0;const d=f(()=>{const s=this.outerObject3d.getWorldPosition(g),a=this.object3d.getWorldPosition(u),h=a.distanceTo(s);t.position.lerp(a,o?1:.1);const n=o?1:t.position.distanceTo(s)/h;t.position.lerpVectors(s,a,n),t.quaternion.copy(this.object3d.getWorldQuaternion(b));const r=v()?!1:n<.35;r!==e&&l.call(this,!r),e=r,o=!1});return()=>{d.cancel()}},[this.targetState.get])}export{p as default};
