import{Z as f,_ as r,$ as u,a0 as d,a1 as i}from"./index.ac2cf653.js";const[m,v]=f(void 0);function L(){this.done||(this.createEffect(()=>{if(!(this.mouseControlState.get()!==!0||r()!==this.camera))return u("camera"),()=>{u("mouse")}},[this.mouseControlState.get,r]),this.createEffect(()=>{if(r()!==this.camera||!this.mouseControlState.get())return;if(v()===this.camera){const e=c=>this.gyrate(c.movementX,c.movementY);return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}}let t=!1,[n,o]=[0,0];const a=d.on("down",e=>(t=!0,[n,o]=[e.clientX,e.clientY])),s=d.on("up",()=>t=!1),l=e=>{if(e.movementX===void 0){const[c,h]=[e.clientX-n,e.clientY-o];[n,o]=[e.clientX,e.clientY],t&&this.gyrate(c*2,h*2);return}t&&this.gyrate(e.movementX*2,e.movementY*2)};return i.addEventListener("pointermove",l),()=>{a.cancel(),s.cancel(),i.removeEventListener("pointermove",l),t=!1}},[this.mouseControlState.get,r,v]),this.createEffect(()=>{const t=r();if(this.mouseControlState.get()!==!0||t!==this.camera)return;const n=()=>{var a,s;return(s=(a=i).requestPointerLock)==null?void 0:s.call(a)},o=()=>{document.pointerLockElement===i?m(t):m(void 0)};return i.addEventListener("click",n),document.addEventListener("pointerlockchange",o),()=>{i.removeEventListener("click",n),document.removeEventListener("pointerlockchange",o),document.exitPointerLock(),m(void 0)}},[this.mouseControlState.get,r]))}export{L as default};
